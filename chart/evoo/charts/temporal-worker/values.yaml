# Default values for temporal-worker subchart
# These values can be overridden by parent chart

# Global values inherited from parent chart
global:
  acpType: "async"
  acpPort: 8000
  temporalAddress: "temporal-frontend.temporal.svc.cluster.local:7233"
  temporalNamespace: "default"
  agentexBaseUrl: "http://agentex.agentex.svc.cluster.local"
  agentName: "evoo"
  agentDescription: "EVOO â€” Evolutionary Operations Optimizer: Autonomous SRE agent with reward-based learning"
  workflowTaskQueue: "evoo-queue"
  workflowName: "EVOOWorkflow"
  # Image configuration - inherited from parent chart
  image:
    repository: eslamanwar/rilo
    pullPolicy: IfNotPresent
    tag: "agents-evoo-v0.1"

nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  automount: false
  annotations: {}
  name: ""

podAnnotations: {}
podLabels: {}

podSecurityContext: {}

securityContext: {}

service:
  type: ClusterIP
  port: 80

# Command and args for the worker container
command:
  - python

args:
  - -m
  - project.run_worker

# Environment variables
env_vars:
  SERVICE_TYPE: "worker"
  AWS_REGION: "eu-west-2"
  AUTH_PRINCIPAL_B64: "eyJ1c2VyX2lkIjoiY2x1c3Rlci11c2VyLWlkIiwiYWNjb3VudF9pZCI6ImNsdXN0ZXItYWNjb3VudC1pZCJ9"
  # OpenRouter LLM Configuration
  OPENAI_BASE_URL: "https://openrouter.ai/api/v1"
  OPENAI_MODEL: "meta-llama/llama-4-maverick"
  # EVOO-specific Configuration
  MAX_LEARNING_RUNS: "50"
  EXPLORATION_RATE: "0.2"
  MEMORY_FILE_PATH: "/tmp/evoo_data/evoo_memory.json"
  STRATEGY_FILE_PATH: "/tmp/evoo_data/evoo_strategies.json"
  INCIDENT_INTERVAL_SECONDS: "5"

# Environment variables from secrets
envFromSecrets: []

# Probes configuration
livenessProbe:
  httpGet:
    path: /readyz
    port: 80
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /readyz
    port: 80
  initialDelaySeconds: 5
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3

resources:
  limits:
    cpu: 500m
    memory: 500Mi
  requests:
    cpu: 250m
    memory: 250Mi

# Horizontal Pod Autoscaler
autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 50

# Volume configuration for service account token
volumes:
  serviceAccountToken:
    enabled: true
    expirationSeconds: 86400  # 24 hours

nodeSelector: {}

tolerations: []

affinity: {}
